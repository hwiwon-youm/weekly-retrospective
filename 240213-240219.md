# ACTION PLAN
  - smart 조건
    - Specific: 구체적인
    - Measurable: 측정가능한
    - Attainable: 달성가능한
    - Relevant: 관련있는
    - Time-boxed: 시간 
  - 지난 Action plan
    - 배경: 지난주에 액션 플랜에 익숙해지지 못함
    - 목표: 30분 업무 텀이 끝나면, 하던 일을 멈추고 개선점 또는 다르게 생각해볼 수 있는점이 있는지 생각해서 한 문장 이상 글로 적기
      - 생각으로만 하면, 잘 안지키게 될것 같아 글로 정리한다.
      - 업무보고와 함께 정리 내용을 공유한다. < 정리를 안할것 같아서 추가함
      - 100% 달성을 목표로 한다.
      - 진행한 업무 내용에 대해서 가장 좋은 해결책이었는지 점수로 기재한다.(1~5점)
      - 해결책이 없는 경우는 p로 작성
    - 결과
      - 2월 14일
      	- 업무공유 4
      		- 정산 관련 인터뷰
      		- 정산 재계산
      		- split에서 값이 바뀌는 문제 발견
      		- 정리 : orderitem.split()에서 calculate를 호출하기 때문에 정산 마저 수량 뿐 아니라 split시점의 값으로 재계산된다.(p)
          
      	- 업무 공유 5
      		- 정산 재계산
      		- split에서 값이 변경되는 문제 테스트 추가
      		- recalculate 변수 추가로 일단 해결 > 코드가 너무 더러운거 같은데 좋은 방법 없을까요?
      		- 정리: 주문 이외에 orderitem.calculate 호출 시, supply_price, commission_currency, nugu_ratio, commission_rate가 변경되지 않아야 한다. 정산 재계산 시 현재 또는 입력한  정산기준가로 변경되어야 한다.(2)
          
      	- 업무 공유 6, 7
      		- 정산 재계산
      		- 주문되지 않았거나, 주문됐어도 정산 재계산인경우 base_currency_price 변경
      		- 정산 대응
      		- 정산 로직 관련 문의
      		- 정리: 정산 영수 금액이 1의 자리 버림인데, 사업부에서는 소수점 버림이라고 함??(3)
          
      - 2월 15일
      	- 업무 공유 1, 2
      		- 영수 금액 1의 자리 버림 내용 확인 중
      		- 품목 정산 기준가 정합성 체크 요청
      		- 셀러 어드민 논의
      			- 오늘 오후 1시 회의에서 정산서 관련 회의에서 확인 필요한 사항
      				- 어떤 필드를 출력할 것인가
      					- 셀러랑 엠디 다른 부분
      				- k커머스 j커머스 무엇이 달라질지
      					- j커머스 cp 필요한 내용 템플릿 전달받은거로 충분한지
      				- 템플릿 동일하게
      					- 한국어, 일본어 동시 기재
      					- invoice는 영어로 작성
      					- 컬럼명, 어떤이름으로 출력할 것인가
      				- 실제 업무 프로세스가 어떻게 되는지
      			- cp k커머스 완료를 위해 필요한 업무
      				- 셀러어드민 정산 파일 다운로드
      					- 확정 이후에만, 다운로드 가능
      					- 다운로드 포맷 확인 필요
      				- 셀러 어드민 인보이스 노출
      					- 생성된 정산서 파일을 jspeard sheet가 있으면(확인 필요) 여기에 뿌려주기
      				- 컨펌
      					- 노아에서 생성되어있는 정산서 확인
      					- 컨펌 기능
      				- 정산 파일 자동 생성
      				- k커머스 cp 계좌정보 입력 > md
      			- CP K 커머스 이후
      				- 1P 개발 - StockHistory 이용해 계산
      				- 인보이스 내역 수정 - J커머스만
      				- 부모 셀러에서 자식 셀러 인보이스 + 내역까지
      			- 정산 재계산 리뷰
      		- 정리: 셀러 어드민 목표, k커머스 cp 자동정산화부터 완료하기(p)
          
      	- 업무 공유 3
      		- 정산 회의
      			- 정산 내역, 셀러와 md 필드 동일
      			- 셀러 언어 입력
      			- 인보이스 한국어/일본어 템플릿 분리
      			- 기본 정산 이외 별건 및 견적서
      				- 1단계 인보이스에 별건 json으로 기록
      				- 2단계
      					- 별건 및 견적서 내역 어드민에서 입력
      					- 별건 내역에 입력된 내용 인보이스에 기재
      			- 1P 입고 내역 기반
      				- 주문번호랑 연결 필요
      		- 정리: 별건 1단계까지 먼저 완료를 목표로(p)
          
      	- 업무 공유 4, 5
      		- 셀러 어드민 논의
      			- 회의 내용 기반으로 업무 리스트 정리(트렐로 카드)
      		- 영수금액 1의 자리 버림 관련 요청
      			- 현재는 영수금액 1의 자리를 버리는데, 소수점으로 변경가능한지 문의하심
      			- base_commission에 math.floor 적용, 정산 로직 변경으로 합의
      		- 정리: 정산 로직 변경하지 않고, 영수 금액만 수정하는 방향을 찾아보았는데 실패했습니다.  꼼수써서 해결 방법을 찾을 것이 아니라 첨부터 사업부에 문의해서 정산 로직 변경으로 진행하는 것이 맞는 방향이었던것 같습니다.(2)
          
      	- 업무 공유 6
      		- 영수 금액 소수점 버림으로 변경 및 영수 금액 바탕으로 정산 금액 계산
      		- 정산 금액 재계산
      		- 정리: 수정할 내용이 명확한 업무 진행해서 개선점할 점 찾지 못함(4)
          
      - 2월 16일
      	- 업무 공유 1
      		- 셀러 어드민 논의
      			- 정산 목록 - 계약 타입별 필터 추가
      			- J커머스 - seller.nugu_ratio 행태? 조사
      				- nugu_ratio 를 안 넣는 게 맞다면 J커머스 한정으로 validation 추가
      				- 그게 아니면 help_text 추가
      		- 영수금액 소수점 버림 pr 머지
      		- 정리
      			- 혜택 nugu_ratio 값을 우선으로하여 정산
      				현재 셀러에 nugu_ratio에 값이 입력되면 이 값을 우선해서 정산 계산하고 있습니다.
      				셀러의 nugu_ratio가 입력되면 그 값을 우선하기 때문에 md분들이 잘못 입력하는 경우 정산 값이 틀리는 문제가 있었고, ㅇㅇ님께서 이 부분을 버그라고 생각하셔서 셀러의 nugu_ratio 대신 혜택의 nugu_ratio를 우선하고 예외 추가하는 방향으로 논의했습니다.
      				이미 현재 코드가 예외 상황을 잘 반영하고 있기 때문에 굳이 혜택 우선으로 로직을 변경하고 예외 추가할 필요가 없다는 의견 전달드렸습니다. 휴먼에러 해결을 위해서는 help_text 추가하기로 했습니다.
      			- 정산 재계산 시, 폐점 관련 테스트 추가
      				폐점 셀러로 인해 기존 로직으로 정산 재계산 시, commission_rate와 nugu_ratio가 변경되는 문제를 확인했고, 이외에도 공급가와 정산통화가 재계산 시점에 변경되는 문제를 해결했습니다.
      			  ㅇㅇ님께서 폐점 셀러로 인해 변경되었다는 내역을 테스트로 남기자는 의견(아니면 주석이라도)을 주셨니다. 폐점 셀러로 인해 문제를 발견했지만, 현재는 폐점과 관계 없이 주문 이후에 특정 필드의 값이 변경지 않도록 수정된 상태이기 때문에, 테스트와 주석 모두 필요 없다는 의견 전달 드렸습니다.

      	- 업무 공유 2
      		- 정산 파일 공급사 이름이 잘못 기재된 문제
      			- 공급사 이름 = seller.name
      			- 셀러 이름이 변경되지 않았고, 로직도 변경되지 않았음
      			- 사업부 내부에서 데이터 가공 중에 값이 덮인것으로 추측됨
      		- 정리: 공급사 이름이 잘못 될수 없는데, 우리쪽에서 무언가 잘못해서 값이 잘못됐나 라는 생각때문에 시간 낭비. ㅇㅇ님께 도움 요청해서 위의 내용을 파악했는데 좀더 빨리 공유 할걸 싶었습니다.(1)
          
      - 2월 19일
      	- 업무 공유 1, 2
      		- 정산 베네핏 리팩토링
      		- 셀러 어드민 정산서 수정 논의
      		- 정리: 코드를 읽고 이해했다고 생각하는것과 이해한 것의 간극이 있어 다시 코드를 읽는 낭비가 생기네요. 빨리 이해할 수 있는 방법을 찾아야겠습니다.(3)
        
      	- 업무 공유 3
      		- Refactor: commission benefit
      		- 정리: 헷갈릴 때는 고민말고 데이터 확인하기(3)
          
      	- 업무 공유 4
      		- 셀러 정산 문서 정리
      		- 쉬운 말로 정리하기가 어렵네요..
      		- 정리: 케이스/테스트에 대해 생각하면서 정리하는게 더 빠를지도? 근데 새로 작성하고 리팩토링하는 시간은 오래걸릴듯..(3)
          
      	- 업무 공유 5
      		- 셀러 정산 문서 정리
      		- 정리: 말로 설명하기 어려운 부분은 공식을 적어두었는데, 잘 풀어서 말할 수 있는 방법이 없을지 고민 필요(3)
          
      	- 업무 공유 6
      		- 셀러 정산 문서 정리
      		- 정리: 셀러 정산 계산 방법에 있는 내용도 정리해야할지, 중복되는 내용을 제거해도 될지...고민중입니다.(4)
          
      	- 업무 공유 7
      		- 셀러 정산 규칙
      			- 셀러 정산 계산 방법: 현재 코드와 다르거나 중복, 중의적인 부분 제거
      			- 예시 정리 중
      		- 정리: 복호두 맛있네요.. 당 최고(3)
          
      	- 업무 공유 8
      		- 셀러 정산 규칙 정리
      		- 정리: 정산 노션 페이지와, 정산 내역과 정산 관련코드의 주석의 명칭들이 달라서 더 헷갈릴 수 있을 것 같아 동일하게 변경하는 작업 진행하겠습니다.(4)


  - 이번 Action plan
    - 배경: 
    - 목표
      -
     
# 주간회고
